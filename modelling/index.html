
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../arc_hbr/">
      
      
        <link rel="next" href="../verification/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.7">
    
    
      
        <title>Bleeding/Ischaemia Risk Modelling - PyHBR Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f2e4d321.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bleedingischaemia-risk-modelling" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PyHBR Docs" class="md-header__button md-logo" aria-label="PyHBR Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyHBR Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bleeding/Ischaemia Risk Modelling
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PyHBR Docs" class="md-nav__button md-logo" aria-label="PyHBR Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PyHBR Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the PyHBR Docs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyHBR Design
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../arc_hbr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARC HBR Calculation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Bleeding/Ischaemia Risk Modelling
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Bleeding/Ischaemia Risk Modelling
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Data Sources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index-events" class="md-nav__link">
    <span class="md-ellipsis">
      Index Events
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outcome-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Outcome Definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outcome Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bleeding-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      Bleeding Outcome
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ischaemia-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      Ischaemia Outcome
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predictors" class="md-nav__link">
    <span class="md-ellipsis">
      Predictors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Model Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimum-performance-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum Performance Criteria
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations-of-administrative-data" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations of Administrative Data
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../verification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bleeding/Ischaemia Risk Estimate Verification
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyHBR Function Reference
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Data Sources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index-events" class="md-nav__link">
    <span class="md-ellipsis">
      Index Events
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outcome-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Outcome Definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outcome Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bleeding-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      Bleeding Outcome
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ischaemia-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      Ischaemia Outcome
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predictors" class="md-nav__link">
    <span class="md-ellipsis">
      Predictors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Model Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimum-performance-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum Performance Criteria
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations-of-administrative-data" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations of Administrative Data
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bleedingischaemia-risk-modelling">Bleeding/Ischaemia Risk Modelling</h1>
<p>Bleeding and ischaemia risk prediction models using PyHBR are trained to predict a bleeding and ischaemia outcome defined by clinical codes (ICD-10 and OPCS-4), and are trained on a number of different datasets. The methods used to develop and test the models is explained below.</p>
<h2 id="data-sources">Data Sources</h2>
<p>Index events and outcomes are determined from diagnosis (ICD-10) and procedure (OPCS-4) codes in Hospital Episode Statistics (HES) data.</p>
<p>In HES, hospital visits are structured into groups of episodes called spells, where each episode corresponds to a continuous period of care (usually) led by one consultant. Each consultant episode contains a list of diagnoses and procedures. Of these, one diagnosis and one procedure is marked as primary.</p>
<p>The clinical coding guidelines<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> define the use of the primary diagnosis field in DGCS.1:</p>
<div class="admonition quote">
<p class="admonition-title">Definition of Primary Diagnosis (extract from DGCS.1)</p>
<ol>
<li>The first diagnosis field(s) of the coded clinical record (the primary diagnosis) will contain
the main condition treated or investigated during the relevant episode of healthcare.</li>
<li>Where a definitive diagnosis has not been made by the responsible clinician the main
symptom, abnormal findings, or problem should be recorded in the first diagnosis field of the
coded clinical record.</li>
</ol>
</div>
<p>The primary diagnosis is not necessary the main clinical diagnosis; instead, it is the main diagnosis being treated in the current episode<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>. Secondary diagnoses are other diagnoses relevant to the current episode, but which are not the primary diagnosis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Secondary diagnoses may contain historical diagnoses if they are relevant to the current episode.</p>
</div>
<p>Similarly, the primary procedure is defined as the main procedure that occurred in the episode<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>:</p>
<div class="admonition quote">
<p class="admonition-title">Definition of Primary Procedure (extract from PRule 2)</p>
<p>When classifying diagnostic information, the International Classification of Diseases and
Health Related Problems (ICD) recommend criteria for the selection of the MAIN condition
for single-cause analysis. OPCS-4 follows this precedent in that the intervention selected
for single procedure analysis from records of episodes of hospital care should be the MAIN
intervention or procedure carried out during the relevant episode which may not always be
the first procedure performed during the consultant episode.</p>
</div>
<p>Secondary procedures are other interventions that occurred in the consultant episode.</p>
<h2 id="index-events">Index Events</h2>
<p>The target cohort for risk prediction is patients who present in hospital with an acute coronary syndrome (ACS), or receive a percutaneous coronary intervention (PCI), such as a stent implant; these groups are likely to be placed on a blood thinning medication such as dual antiplatelet therapy. </p>
<p>To capture acute presentation for ACS, patients are included if the ACS diagnosis is listed as the primary diagnosis in any episode of the spell. This is to rule out episodes where a historical ACS is coded. A PCI is allowed in any primary or secondary position, on the assumption that inclusion of the procedure means that the procedure was performed.</p>
<p>A UK Biobank report identifies a validated group of codes for identification of MI (both STEMI and NSTEMI) based on HES data, with PPV greater than 70% for each group<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup>. However, the codes contain I25.2 (old myocardial infarction), which would capture patients in index events who do not necessarily have ACS at that time. This issue was addressed in a study validating ACS code groups in a French administrative database <sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>. Of the different code groups they present, the I20.0, I21.<em> and I24.</em> was identified as a good compromise between validated ACS and PPV (84%).</p>
<p>ALL OPCS-4 PCI codes are included, based on the list provided in Pathak et al. (2023).</p>
<p>The code groups used to define the index event are shown below:</p>
<details class="note">
<summary>List of ACS and PCI codes used to define index events</summary>
<table>
<thead>
<tr>
<th>Category</th>
<th>ICD-10</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACS</td>
<td>I20.0</td>
<td>Unstable angina</td>
</tr>
<tr>
<td></td>
<td>I21.*</td>
<td>Acute myocardial infarction</td>
</tr>
<tr>
<td></td>
<td>I24.*</td>
<td>Other acute ischaemic heart diseases</td>
</tr>
<tr>
<td>PCI</td>
<td>K49.*</td>
<td>Transluminal balloon angioplasty of coronary artery</td>
</tr>
<tr>
<td></td>
<td>K50.*</td>
<td>Other therapeutic transluminal operations on coronary artery</td>
</tr>
<tr>
<td></td>
<td>K75.*</td>
<td>Percutaneous transluminal balloon angioplasty and insertion of stent into coronary artery</td>
</tr>
</tbody>
</table>
</details>
<h2 id="outcome-definition">Outcome Definition</h2>
<p>Bleeding and ischaemia outcomes are defined by looking for ICD-10 codes in the spells that occur after the index presentation, up to one year.</p>
<h3 id="bleeding-outcome">Bleeding Outcome</h3>
<p>The bleeding outcome definition should map to a clinically relevant definition of bleeding for patients on anticoagulant therapy. One such definition is bleeding academic research consortium (BARC) 3 or 5 bleeding<sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup>, which is the basis of the high bleeding risk definition by the Academic Research Consortium (ARC)<sup id="fnref:7"><a class="footnote-ref" href="#fn:7">7</a></sup>.</p>
<p>Many ICD-10-coded bleeding events may qualify for BARC-2, because being written explicitly in the patient notes (a criterion for coding) could imply that an "overt" bleed is present, or that the bleed is "more than would be expected for the clinical circumstance". </p>
<p>Determining that a bleed qualifies for BARC-3 requires a haemoglobin drop due to the bleed of greater than 3 g/dL. This cannot be determined from an analysis of ICD-10 codes alone. </p>
<p>Several attempts to capture "severe" bleeding from administrative codes exist in the literature. For example, one study identifies a group of ICD-10 codes with a particularly high positive predictive value (PPV; chance that a ICD-10-coded bleed is in fact a clinically relevant bleed), of 88%<sup id="fnref:8"><a class="footnote-ref" href="#fn:8">8</a></sup>. The list of ICD-10 codes is shown below:</p>
<details class="note">
<summary>List of major bleeding codes<sup id="fnref2:8"><a class="footnote-ref" href="#fn:8">8</a></sup></summary>
<table>
<thead>
<tr>
<th>Description</th>
<th>ICD-10CM Codes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subarachnoid hemorrhage</td>
<td>I60</td>
</tr>
<tr>
<td>Intracranial hemorrhage</td>
<td>I61</td>
</tr>
<tr>
<td>Subdural hemorrhage</td>
<td>I62</td>
</tr>
<tr>
<td>Upper gastrointestinal bleeding</td>
<td>I85.0, K22.1, K22.6, K25.0, K25.2, K25.4, K25.6,K26.0, K26.2, K26.4, K26.6, K27.0, K27.2, K27.4,K27.6, K28.0, K28.2, K28.4, K28.6, K29.0, K31.80,K63.80, K92.0, K92.1, K92.2</td>
</tr>
<tr>
<td>Lower gastrointestinal bleeding</td>
<td>K55.2, K51, K57, K62.5, K92.0, K92.1, K92.2</td>
</tr>
</tbody>
</table>
<p>This groups has been interpreted as the following set of (UK) ICD-10 codes:</p>
<table>
<thead>
<tr>
<th>ICD-10</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>I60</td>
<td>Subarachnoid haemorrhage</td>
</tr>
<tr>
<td>I61</td>
<td>Intracerebral haemorrhage</td>
</tr>
<tr>
<td>I62</td>
<td>Other nontraumatic intracranial haemorrhage</td>
</tr>
<tr>
<td>I85.0</td>
<td>Oesophageal varices with bleeding</td>
</tr>
<tr>
<td>K22.1</td>
<td>Ulcer of oesophagus</td>
</tr>
<tr>
<td>K22.6</td>
<td>Gastro-oesophageal laceration-haemorrhage syndrome</td>
</tr>
<tr>
<td>K25.0</td>
<td>Gastric ulcer : acute with haemorrhage</td>
</tr>
<tr>
<td>K25.2</td>
<td>Gastric ulcer : acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K25.4</td>
<td>Gastric ulcer : chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td>K25.6</td>
<td>Gastric ulcer : chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K26.0</td>
<td>Duodenal ulcer : acute with haemorrhage</td>
</tr>
<tr>
<td>K26.2</td>
<td>Duodenal ulcer : acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K26.4</td>
<td>Duodenal ulcer : chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td>K26.6</td>
<td>Duodenal ulcer : chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K27.0</td>
<td>Peptic ulcer, site unspecified : acute with haemorrhage</td>
</tr>
<tr>
<td>K27.2</td>
<td>Peptic ulcer, site unspecified : acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K27.4</td>
<td>Peptic ulcer, site unspecified : chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td>K27.6</td>
<td>Peptic ulcer, site unspecified : chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K28.0</td>
<td>Gastrojejunal ulcer : acute with haemorrhage</td>
</tr>
<tr>
<td>K28.2</td>
<td>Gastrojejunal ulcer : acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K28.4</td>
<td>Gastrojejunal ulcer : chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td>K28.6</td>
<td>Gastrojejunal ulcer : chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td>K29.0</td>
<td>Acute haemorrhagic gastritis</td>
</tr>
<tr>
<td>K92.0</td>
<td>Haematemesis</td>
</tr>
<tr>
<td>K92.1</td>
<td>Melaena</td>
</tr>
<tr>
<td>K92.2</td>
<td>Gastrointestinal haemorrhage, unspecified</td>
</tr>
<tr>
<td>K55.2</td>
<td>Angiodysplasia of colon</td>
</tr>
<tr>
<td>K51</td>
<td>Ulcerative colitis</td>
</tr>
<tr>
<td>K57</td>
<td>Diverticular disease of intestine</td>
</tr>
<tr>
<td>K62.5</td>
<td>Haemorrhage of anus and rectum</td>
</tr>
</tbody>
</table>
</details>
<p>The primary rationale for adopting such a code group would be that:</p>
<ul>
<li>It originates from a study where the PPV of the code group was measured (offsetting the risk that coded bleeding definitions do not correspond to real bleeds);</li>
<li>The study qualifies the group as "major" bleeds (so that it might be taken as a reasonable proxy for BARC 3 or 5 bleeding).</li>
</ul>
<p>Disadvantages, however, include differences in coding between the UK and Canada (the location of the study), particularly the difference between ICD-10 (UK) and ICD-10CM (Canada). In addition, the presence of unqualified diverticulosis within the bleeding group is not directly a bleeding condition, and may significantly reduce the PPV in older patients.</p>
<p>As a result, we define a bleeding outcome based on the BARC 2-5 criteria<sup id="fnref:9"><a class="footnote-ref" href="#fn:9">9</a></sup>.</p>
<details class="note">
<summary>Bleeding codes corresponding to BARC 2-5</summary>
<table>
<thead>
<tr>
<th>Category</th>
<th>ICD-10</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gastrointestinal</td>
<td>I85.0</td>
<td>Oesophageal varices with bleeding</td>
</tr>
<tr>
<td></td>
<td>K25.0</td>
<td>Gastric ulcer, acute with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K25.2</td>
<td>Gastric ulcer, acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K25.4</td>
<td>Gastric ulcer, chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K25.6</td>
<td>Chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K26.0</td>
<td>Duodenal ulcer, acute with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K26.2</td>
<td>Duodenal ulcer, acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K26.4</td>
<td>Duodenal ulcer, chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K26.6</td>
<td>Chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K27.0</td>
<td>Peptic ulcer, acute with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K27.2</td>
<td>Peptic ulcer, acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K27.4</td>
<td>Peptic ulcer, chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K27.6</td>
<td>Chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K28.0</td>
<td>Gastrojejunal ulcer, acute with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K28.2</td>
<td>Acute with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K28.4</td>
<td>Gastrojejunal ulcer, chronic or unspecified with haemorrhage</td>
</tr>
<tr>
<td></td>
<td>K28.6</td>
<td>Chronic or unspecified with both haemorrhage and perforation</td>
</tr>
<tr>
<td></td>
<td>K29.0</td>
<td>Acute haemorrhagic gastritis</td>
</tr>
<tr>
<td></td>
<td>K62.5</td>
<td>Haemorrhage of anus and rectum</td>
</tr>
<tr>
<td></td>
<td>K66.1</td>
<td>Haemoperitoneum</td>
</tr>
<tr>
<td></td>
<td>K92.0</td>
<td>Haematemesis</td>
</tr>
<tr>
<td></td>
<td>K92.1</td>
<td>Melaena</td>
</tr>
<tr>
<td></td>
<td>K92.2</td>
<td>Gastrointestinal haemorrhage, unspecified</td>
</tr>
<tr>
<td>Intracerebral</td>
<td>I60.*</td>
<td>Subarachnoid haemorrhage</td>
</tr>
<tr>
<td></td>
<td>I61.*</td>
<td>Intracerebral haemorrhage</td>
</tr>
<tr>
<td></td>
<td>I62.*</td>
<td>Other nontraumatic intracranial haemorrhage</td>
</tr>
<tr>
<td></td>
<td>I69.0</td>
<td>Sequelae of subarachnoid haemorrhage</td>
</tr>
<tr>
<td></td>
<td>I69.1</td>
<td>Sequelae of intracerebral haemorrhage</td>
</tr>
<tr>
<td></td>
<td>I69.2</td>
<td>Sequelae of other nontraumatic intracranial haemorrhage</td>
</tr>
<tr>
<td></td>
<td>S06.4</td>
<td>Epidural haemorrhage</td>
</tr>
<tr>
<td>Genitourinary</td>
<td>N93.8</td>
<td>Other specified abnormal uterine and vaginal bleeding</td>
</tr>
<tr>
<td></td>
<td>N93.9</td>
<td>Abnormal uterine and vaginal bleeding, unspecified</td>
</tr>
<tr>
<td>Other</td>
<td>R04.*</td>
<td>Haemorrhage from respiratory passages</td>
</tr>
<tr>
<td></td>
<td>I23.0</td>
<td>Haemopericardium as current complication following acute myocardial infarction</td>
</tr>
</tbody>
</table>
</details>
<p>The group is generated based on UK ICD-10 data, which is likely to reduce coding discrepancies, and does not contain the generic diverticulosis category. </p>
<p>No PPV is available for this code group. A basic chart review should be performed on the patients identified by this bleeding group to increase confidence that they match relevant bleeding events.</p>
<p>A spell is considered to be a bleeding outcome if any episode of the spell contains a bleeding code in the primary position.</p>
<p>Fatal bleeding (BARC 5) is included in the bleeding outcome. Mortality information is available from the Civil Registration of Deaths, which includes a primary cause of death and multiple secondary causes of death. A death is included in the bleeding outcome when the primary cause of death (an ICD-10 code) is an ADAPTT bleeding code as described above.</p>
<h3 id="ischaemia-outcome">Ischaemia Outcome</h3>
<p>Various definitions of ischaemia outcomes are commonly used when deriving outcomes from administrative databases<sup id="fnref:10"><a class="footnote-ref" href="#fn:10">10</a></sup>. We require a definition of major adverse cardiovascular event (MACE) that uses ICD-10 codes, and includes only ischaemia outcomes (for example, excludes haemorrhagic stroke), due to the requirement for comparing bleeding and ischaemia models for the purposes of assessing a bleeding/ischaemia trade-off. The definition should also include cardiovascular mortality, to match the BARC-5 fatal bleeding included in the bleeding outcome definition.</p>
<p>The best matching definition in Bosco et al. (2021)<sup id="fnref2:10"><a class="footnote-ref" href="#fn:10">10</a></sup> (Table 1) is Ohm et al. (2018)<sup id="fnref:11"><a class="footnote-ref" href="#fn:11">11</a></sup>, because:</p>
<ul>
<li>It is simple (three-point), and includes only ischaemia outcomes (AMI, ischaemic stroke, and CV death)</li>
<li>All codes used were fully defined;</li>
<li>Codes used ICD-10 (instead of ICD-9).</li>
</ul>
<p>The code groups are defined as follows:</p>
<details class="note">
<summary>AMI, ischaemic stroke, and CV death components of MACE used for ischaemia outcomes</summary>
<table>
<thead>
<tr>
<th>Category</th>
<th>ICD-10</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMI</td>
<td>I21.*</td>
<td>Acute myocardial infarction</td>
</tr>
<tr>
<td></td>
<td>I22.*</td>
<td>Subsequent myocardial infarction</td>
</tr>
<tr>
<td>Ischaemic stroke</td>
<td>I63.*</td>
<td>Cerebral infarction</td>
</tr>
<tr>
<td>CV death</td>
<td>I46.1</td>
<td>Sudden cardiac death, so described</td>
</tr>
<tr>
<td></td>
<td>I46.9</td>
<td>Cardiac arrest, unspecified</td>
</tr>
</tbody>
</table>
</details>
<p>Disadvantages of this code group includes the lack of definition in whether the primary/secondary positions are used, and lack of validation. Similarly to the bleeding groups, basic validation may be performed by a chart analysis.</p>
<h2 id="predictors">Predictors</h2>
<p>Clinical codes are used to define predictors, but an exclusion period of one month is applied to avoid using ICD-10 and OPCS-4 codes that would not have been coded yet before the index (clinical coding happens monthly, and clinical codes are not available until this processing has occurred). </p>
<p>Depending on which data sources are used, other predictors may be available. For example, predictors in some models including primary care attribute flags, and physiological measurements such as HbA1c and blood pressure.</p>
<h2 id="models">Models</h2>
<p>Classification models are trained on the bleeding and ischaemia outcomes within one year, which are binary (either an adverse event occurred or it did not). </p>
<p>Both adverse outcomes have a low prevalence (0 - 20%). If individual patient risk is broadly localised at low values around the prevalence, it is not possible for any classification model to predict who will have adverse outcomes. Evidence for more determinstic outcomes, where a low number of patients have nearly 100% chance of adverse events and others have nearly 0% risk, would be provided by models that are able to predict adverse outcomes very well (i.e. with very high true negative/positive rates, and a very high ROC AUC).</p>
<p>Since very high ROC AUCs are not observed, the former interpretation of risk distribution is more likely. In this case, the adverse outcome is considered a proxy for high risk or low risk (instead of outcome occurred or outcome did not occur), and the result may be used in two possible ways:</p>
<ul>
<li>The classification outcome itself may be utilised directly as an estimate of whether the patient is high or low risk.</li>
<li>The continuous parameter underlying the classification model decision may be used as an estimate of continuous patient risk (i.e. between 0% and 100%).</li>
</ul>
<p>To test the accuracy of the model under the first interpretation, it is necessary to establish that patients estimated at high risk typically have more adverse events. In the second interpretation, estimates must be made of patients' true continuous risk, which requires an aggregate over patients in the testing set. This is discussed in the next section.</p>
<h2 id="model-testing">Model Testing</h2>
<p>Models are assessed according to two criteria:</p>
<ul>
<li><strong>Accuracy</strong>: Whether the model produces the correct risk classifications or estimates;</li>
<li><strong>Stability</strong>: Whether the model produces consistent risk classifications or estimates.</li>
</ul>
<p>Both these metrics are assessed by applying the models to data in the testing set, which is not used in the model fitting process. Accuracy is assessed through calibration plots, by grouping patients into similar-risk groups and comparing the prevalence in each group to the estimated risk.</p>
<p>Stability is assessed by training multiple models on bootstrap resamples of the training set, and comparing the model outputs for each patient.</p>
<h2 id="minimum-performance-criteria">Minimum Performance Criteria</h2>
<p>A minimum performance criteria for the models can be established by estimating the number of patients either positively or negatively affected by a change in intervention based on model risk estimates for bleeding and ischaemia.</p>
<p>The simplest model to perform these calculations is hosted <a href="https://hbrtradeoff.streamlit.app">here</a>. It assumes determinstic outcomes, meaning that all patients are assumed to be either 0% or 100% risk before an intervention is applied. More complex versions of the calculation could assume a more realistic distribution of patient risk, and/or allow for differences in the effect of the intervention depending on the real patient risk.</p>
<p>The model can be used to understand possible benefit or harm caused by taking action based on the estimates from bleeding/ischaemia models, based on the background prevalence of the outcomes, the performance of the model, and the modifications in risk caused by the intervention.</p>
<h2 id="limitations-of-administrative-data">Limitations of Administrative Data</h2>
<p>While use of ICD-10 and OPCS-4 coded patient data is useful because of its size and availability, there are caveats regarding its use for models intended directly for patient care.</p>
<p>Coding is performed manually for financial purposes. There is evidence that internal inconsistencies in the data exist<sup id="fnref:12"><a class="footnote-ref" href="#fn:12">12</a></sup>, that may impact tools designed for direct patient care. This modification of the intended purpose of the dataset should be considered if the data is to be used in clinical decision support tools.</p>
<p>There is a wide degree of choice involved in selecting code groups to define index events and outcomes[@bosco2022major], both of which directly determine what question a given model is addressing (rather than how accurate it is). It is not possible to assess how well the coding maps to clinical reality using any model metric; the only available method is chart review, which is not possible to perform directly using only HES data.</p>
<p>In addition to variability in choice of code groups, variability also exists regarding which episode (or epsiodes) of a spell is used to define an event, and which primary/secondary positions should be utilised. There is no systematic consensus on how these choices should be made when creating model for patient-care purposes.</p>
<p>Finally, it is hard to assess coding accuracy by comparing the prevalence of events with trial or study data, because trials and studies often introduce some bias due to the recruitment criteria causing a discrepancy compared to counts of events in the entire patient population.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>National Clinical Coding Standards ICD-10 5th Edition. NHS England; 2023.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><span class="nocase">Short Guide to Clinical Coding for Clinicians&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>National Clinical Coding Standards OPCS-4. NHS England; 2024.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Biobank U. Definitions of acute myocardial infarction and main myocardial infarction pathological types: UK biobank phase 1 outcomes adjudication. 2017.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>Bezin J, Girodet PO, Rambelomanana S, Touya M, Ferreira P, Gilleron V, et al. Choice of ICD-10 codes for the identification of acute coronary syndrome in the french hospitalization database. Fundamental   &amp; clinical pharmacology. 2015;29(6):586–91.&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Mehran R, Rao SV, Bhatt DL, Gibson CM, Caixeta A, Eikelboom J, et al. Standardized bleeding definitions for cardiovascular clinical trials: A consensus report from the bleeding academic research consortium. Circulation [Internet]. 2011;123(23):2736–47. Available from: <a href="https://www.ahajournals.org/doi/10.1161/circulationaha.110.009449">https://www.ahajournals.org/doi/10.1161/circulationaha.110.009449</a>&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>Urban P, Mehran R, Colleran R, Angiolillo DJ, Byrne RA, Capodanno D, et al. Defining high bleeding risk in patients undergoing percutaneous coronary intervention: A consensus document from the academic research consortium for high bleeding risk. Circulation [Internet]. 2019;140(3):240–61. Available from: <a href="https://www.ahajournals.org/doi/10.1161/CIRCULATIONAHA.119.040167">https://www.ahajournals.org/doi/10.1161/CIRCULATIONAHA.119.040167</a>&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>Al-Ani F, Shariff S, Siqueira L, Seyam A, Lazo-Langner A. Identifying venous thromboembolism and major bleeding in emergency room discharges using administrative data. Thrombosis research [Internet]. 2015;136(6):1195–8. Available from: <a href="https://www.thrombosisresearch.com/article/S0049-3848(15)30167-5/abstract">https://www.thrombosisresearch.com/article/S0049-3848(15)30167-5/abstract</a>&#160;<a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 8 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:8" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>Pufulete M, Harris J, Sterne JA, Johnson TW, Lasserson D, Mumford A, et al. Comprehensive ascertainment of bleeding in patients prescribed different combinations of dual antiplatelet therapy (DAPT) and triple therapy (TT) in the UK: Study protocol for three population-based cohort studies emulating “target trials”(the ADAPTT study). BMJ open [Internet]. 2019;9(6):e029388. Available from: <a href="https://bmjopen.bmj.com/content/9/6/e029388">https://bmjopen.bmj.com/content/9/6/e029388</a>&#160;<a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
<li id="fn:10">
<p>Bosco E, Hsueh L, McConeghy KW, Gravenstein S, Saade E. Major adverse cardiovascular event definitions used in observational analysis of administrative databases: A systematic review. BMC Medical Research Methodology. 2021;21(1):1–18.&#160;<a class="footnote-backref" href="#fnref:10" title="Jump back to footnote 10 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:10" title="Jump back to footnote 10 in the text">&#8617;</a></p>
</li>
<li id="fn:11">
<p>Ohm J, Skoglund PH, Discacciati A, Sundström J, Hambraeus K, Jernberg T, et al. Socioeconomic status predicts second cardiovascular event in 29,226 survivors of a first myocardial infarction. European Journal of Preventive Cardiology. 2018;25(9):985–93.&#160;<a class="footnote-backref" href="#fnref:11" title="Jump back to footnote 11 in the text">&#8617;</a></p>
</li>
<li id="fn:12">
<p>Hardy F, Heyl J, Tucker K, Hopper A, March textasciitilde a MJ, Briggs TW, et al. Data consistency in the english hospital episodes statistics database. BMJ Health   &amp; Care Informatics. 2022;29(1).&#160;<a class="footnote-backref" href="#fnref:12" title="Jump back to footnote 12 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.caa56a14.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>